# ============================================
# FLOWREX ENVIRONMENT CONFIGURATION
# ============================================
# Copy this file to .env and fill in values
# NEVER commit .env to version control

# --- ENVIRONMENT ---
NODE_ENV=development          # development | staging | production
ENVIRONMENT=dev               # dev | staging | prod
APP_ENV=development           # development | staging | production

# --- APPLICATION ---
APP_NAME=Flowrex
APP_VERSION=1.0.0
APP_URL=http://localhost:3000
API_URL=http://localhost:8000

# --- BACKEND ---
BACKEND_HOST=0.0.0.0
BACKEND_PORT=8000
BACKEND_WORKERS=4
BACKEND_RELOAD=true           # Only true in development
LOG_LEVEL=INFO                # DEBUG | INFO | WARNING | ERROR | CRITICAL
DEBUG=true

# --- DATABASE ---
POSTGRES_USER=flowrex
POSTGRES_PASSWORD=your_secure_password
POSTGRES_DB=flowrex
DATABASE_URL=postgresql+asyncpg://flowrex:password@localhost:5432/flowrex
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600

# --- REDIS ---
REDIS_URL=redis://localhost:6379/0
REDIS_MAX_CONNECTIONS=50

# --- JWT AUTHENTICATION ---
APP_SECRET_KEY=generate_with_openssl_rand_hex_32
JWT_SECRET_KEY=generate_with_openssl_rand_hex_32
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# --- CORS ---
CORS_ORIGINS=http://localhost:3000,http://localhost:3001
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001
CORS_ALLOW_CREDENTIALS=true

# --- DATA PROVIDERS ---
TWELVEDATA_API_KEY=your_twelvedata_api_key_here
TWELVEDATA_BASE_URL=https://api.twelvedata.com
TWELVEDATA_RATE_LIMIT=8

# --- BROKERS ---
# OANDA
OANDA_ACCOUNT_ID=
OANDA_API_KEY=
OANDA_BASE_URL=https://api-fxpractice.oanda.com
# For live trading: https://api-fxtrade.oanda.com

# MT5
MT5_LOGIN=
MT5_PASSWORD=
MT5_SERVER=

# --- RATE LIMITING ---
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST=10

# --- WEBSOCKET ---
WS_HEARTBEAT_INTERVAL=30
WS_MAX_CONNECTIONS=100
WS_MESSAGE_QUEUE_SIZE=1000

# --- SECURITY ---
SECURITY_HEADERS_ENABLED=true
CSRF_PROTECTION_ENABLED=true
SESSION_COOKIE_SECURE=false   # true in production
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=lax   # strict in production

# --- MONITORING ---
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# --- LOGGING ---
LOG_FORMAT=json               # json | text
LOG_FILE_ENABLED=false
LOG_FILE_PATH=/var/log/flowrex/app.log
LOG_FILE_MAX_BYTES=10485760   # 10MB
LOG_FILE_BACKUP_COUNT=5

# --- PROMETHEUS METRICS ---
METRICS_ENABLED=true
METRICS_PORT=9090

# --- BACKUP ---
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *     # 2 AM daily
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=
BACKUP_S3_REGION=us-east-1

# --- FEATURE FLAGS ---
FEATURE_AI_AGENTS_ENABLED=true
FEATURE_BACKTESTING_ENABLED=true
FEATURE_OPTIMIZATION_ENABLED=true
FEATURE_LIVE_TRADING_ENABLED=false

# --- SMTP (for email notifications) ---
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=noreply@flowrex.app
SMTP_USE_TLS=true

# --- FRONTEND BUILD ---
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_API_BASE=/api/v1
NEXT_PUBLIC_WS_URL=ws://localhost:8000/ws
NEXT_PUBLIC_ENVIRONMENT=development
